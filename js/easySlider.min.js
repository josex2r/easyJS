!function(t){var e=t(window);t.fn.easySlider=function(n){function i(){w.removeClass("active"),t(w.get(y.active)).addClass("active")}function o(){X=!1}function a(){X=!0}function c(){w.prev=t(w.get(y.prev)),w.active=t(w.get(y.active)),w.next=t(w.get(y.next)),w.prev.css({top:100*-y.prev+"%",left:"-100%"}),w.active.css({top:100*-y.active+"%",left:"0%"}),w.next.css({top:100*-y.next+"%",left:"100%"}),console.log(y)}function s(){c(),o(),n.auto&&T.reset()}function u(t,e){var o="+=0px",c="+=0px",u="+=0px";switch(a(),t){case"prev":h("prev"),c="0%",o="100%";break;case"next":h("next"),o="-100%",u="0%";break;case"restore":c="-100%",o="0%",u="100%"}switch(e){case"slow":e=2*n.timeout;break;case"fast":e=n.timeout/4;break;default:e=n.timeout}w.prev.animate({left:c},e),w.active.animate({left:o},e),w.next.animate({left:u},e),d=new f(s,n.timeout+1),i()}function r(){void 0!==d&&d.cancel(),w.active.add(w.prev).add(w.next).stop(),o(),i()}function l(){X===!1&&u("next")}function v(){X===!1&&u("prev")}function h(t){switch(t){case"prev":y.active=0==y.active?w.length-1:y.active-1,y.prev=0==y.active?w.length-1:y.active-1,y.next=y.active==w.length-1?0:y.active+1;break;case"next":y.active=y.active==w.length-1?0:y.active+1,y.prev=0==y.active?w.length-1:y.active-1,y.next=y.active==w.length-1?0:y.active+1}}function f(t,e){var n,i,o=this,a=t,c=arguments,s=e;this.running=!1,this.onpause=function(){},this.onresume=function(){},this.cancel=function(){this.running=!1,clearTimeout(i)},this.pause=function(){this.running&&(e-=(new Date).getTime()-n,this.cancel(),this.onpause())},this.resume=function(){this.running||(this.running=!0,n=(new Date).getTime(),i=setTimeout(function(){a.apply(o,Array.prototype.slice.call(c,2,c.length))},e),this.onresume())},this.reset=function(){this.cancel(),this.running=!0,e=s,i=setTimeout(function(){a.apply(o,Array.prototype.slice.call(c,2,c.length))},s)},this.add=function(t){this.pause(),e+=t,this.resume()},this.resume()}function p(t){(null===T||t)&&(T=new f(function(){l(),T.reset()},n.delay),T.onpause=r,T.onresume=function(){o(),l()})}function g(){}var d,m={active:0,auto:!0,delay:2e3,touch:!0,timeout:400},n=t.extend(m,n),x=t(this),w=x.children(),y={prev:0==n.active?w.length-1:n.active-1,active:n.active,next:n.active==w.length-1?0:n.active+1},T=null,X=!1;if(x.css({overflow:"hidden",maxHeight:x.height()}),w.css({"float":"left",position:"relative",width:"100%",height:"100%"}),x.getActive=function(){return y.active},i(),c(),n.auto&&p(),n.touch){var b=null;x.on("touchstart mousedown",function(t){if(t.preventDefault(),null===b&&X===!1){switch(b={touching:!0,coords:[],startX:null,startY:null},t.type){case"mousedown":b.startX=t.clientX,b.startY=t.clientY;break;case"touchstart":console.log(t.originalEvent),b.startX=t.originalEvent.targetTouches[0].clientX,b.startY=t.originalEvent.targetTouches[0].clientY}b.coords[0]={x:b.startX,y:b.startY},x.stop()}}),x.on("touchmove mousemove",function(t){if(t.preventDefault(),null!==b){switch(t.type){case"mousemove":b.coords.push({x:t.clientX,y:t.clientY});break;case"touchmove":b.coords.push({x:t.originalEvent.targetTouches[0].clientX,y:t.originalEvent.targetTouches[0].clientY})}var e=b.coords[b.coords.length-2].x-b.coords[b.coords.length-1].x;x.stop(),w.active.add(w.prev).add(w.next).animate({left:"-="+e+"px"},1)}}),x.on("touchend mouseup",function(t){if(t.preventDefault(),null!==b){var e=b.startX-b.coords[b.coords.length-1].x,n=x.width();Math.abs(e)>n/4?0>e?u("prev","fast"):u("next","fast"):u("restore"),b=null}}),x.on("mouseleave",function(t){t.preventDefault(),null!==b&&x.trigger("ontouchstart"in window||navigator.msMaxTouchPoints?"touchend":"mouseup")})}return e.resize(g),g(),x.next=l,x.prev=v,x.play=function(){null===T?p():T.resume()},x.stop=function(){null!==T&&T.pause()},x}}(jQuery);